<!DOCTYPE html>
<html lang="en">
  <head>
  <title>Natural object placement with Poisson Disk Sampling</title>
  <link rel="stylesheet" href="/assets/css/styles.css" />
  <!-- generics -->
  <link rel="icon" href="/assets/Images/favicons/favicon_32.png" sizes="32x32" />
  <link rel="icon" href="/assets/Images/favicons/favicon_128.png" sizes="128x128" />
  <link rel="icon" href="/assets/Images/favicons/favicon_192.png" sizes="192x192" />

  <!-- Android -->
  <link rel="shortcut icon" href="/assets/Images/favicons/favicon_196.png" sizes="196x196" />

  <!-- iOS -->
  <link
    rel="apple-touch-icon"
    href="/assets/Images/favicons/favicon_152.png"
    sizes="152x152"
  />
  <link
    rel="apple-touch-icon"
    href="/assets/Images/favicons/favicon_167.png"
    sizes="167x167"
  />
  <link
    rel="apple-touch-icon"
    href="/assets/Images/favicons/favicon_180.png"
    sizes="180x180"
  />

  <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Natural object placement with Poisson Disk Sampling | Cédric Van Huffelen</title>
<meta name="generator" content="Jekyll v4.0.1" />
<meta property="og:title" content="Natural object placement with Poisson Disk Sampling" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="I recently came across a tweet from Pico Tanks on where they create regions, defined by a shape, where players can hide. What stands out to me the most, is how the trees in those regions never seem to overlap. After looking more into this, I found an algorithm called Poisson disk sampling." />
<meta property="og:description" content="I recently came across a tweet from Pico Tanks on where they create regions, defined by a shape, where players can hide. What stands out to me the most, is how the trees in those regions never seem to overlap. After looking more into this, I found an algorithm called Poisson disk sampling." />
<link rel="canonical" href="http://localhost:4000/portfolio/PoissonDiscSampling.html" />
<meta property="og:url" content="http://localhost:4000/portfolio/PoissonDiscSampling.html" />
<meta property="og:site_name" content="Cédric Van Huffelen" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-09-05T00:13:15+02:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Natural object placement with Poisson Disk Sampling" />
<meta name="twitter:site" content="@" />
<script type="application/ld+json">
{"dateModified":"2021-09-05T00:13:15+02:00","datePublished":"2021-09-05T00:13:15+02:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/portfolio/PoissonDiscSampling.html"},"url":"http://localhost:4000/portfolio/PoissonDiscSampling.html","description":"I recently came across a tweet from Pico Tanks on where they create regions, defined by a shape, where players can hide. What stands out to me the most, is how the trees in those regions never seem to overlap. After looking more into this, I found an algorithm called Poisson disk sampling.","headline":"Natural object placement with Poisson Disk Sampling","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  <!-- for mathjax support -->
  
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
    TeX: { equationNumbers: { autoNumber: "AMS" } }
    });
  </script>
  <script
    type="text/javascript"
    async
    src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"
  ></script>
  
</head>


  <body>
    <!-- Navigation -->
<nav class="navbar fixed-top navbar-expand-lg navbar-light bg-light fixed-top">
  <div class="container">
    <a href="/index.html">
    <img src="/assets/Images/favicons/favicon_128.png" alt="">
    </a>
      <a class="navbar-brand" href="/index.html">Cédric Van Huffelen</a>
          <span class="navbar-text">
            Technical Artist | Unity Developer
          </span>
      <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
              data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false"
              aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto list-unstyled">
            
              <li
              
              class="nav-item">
              
                <a class="nav-link" href="/tutorials.html">Tutorials</a>
              </li>
            
              <li
              
              class="nav-item">
              
                <a class="nav-link" href="/portfolio.html">Portfolio</a>
              </li>
            
              <li
              
              class="nav-item">
              
                <a class="nav-link" href="/professionalWork.html">Professional Work</a>
              </li>
            
              <li
              
              class="nav-item">
              
                <a class="nav-link" href="/resume.html">Resume</a>
              </li>
            
              <li
              
              class="nav-item">
              
                <a class="nav-link" href="/about.html">About</a>
              </li>
            
          </ul>
      </div>
  </div>
</nav>

    <!-- Page Content -->
    <div class="container">
      <p></p>

      <!-- Page Heading/Breadcrumbs -->
      <h1>
        Natural object placement with Poisson Disk Sampling
        <small class="blockquote text-center"></small>
      </h1>

      <p>I recently came across a tweet from Pico Tanks on where they create regions, defined by a shape, where players can hide. What stands out to me the most, is how the trees in those regions never seem to overlap. After looking more into this, I found an algorithm called <strong>Poisson disk sampling</strong>.</p>

<div class="row">
        <div class="col-lg-6 col-sm-6 portfolio-item">
            <blockquote class="twitter-tweet" data-theme="light"><p lang="en" dir="ltr">I got inspired by <a href="https://twitter.com/PicoTanks?ref_src=twsrc%5Etfw">@PicoTanks</a> Spline based object placement so I decided to try and create my own. <a href="https://twitter.com/hashtag/gamedev?src=hash&amp;ref_src=twsrc%5Etfw">#gamedev</a> <a href="https://twitter.com/hashtag/madewithunity?src=hash&amp;ref_src=twsrc%5Etfw">#madewithunity</a> <a href="https://twitter.com/hashtag/screenshotsaturday?src=hash&amp;ref_src=twsrc%5Etfw">#screenshotsaturday</a> <a href="https://twitter.com/hashtag/indiedev?src=hash&amp;ref_src=twsrc%5Etfw">#indiedev</a> <a href="https://t.co/fdj9jxysFT">pic.twitter.com/fdj9jxysFT</a></p>&mdash; Cédric Van Huffelen (@Shaderic_) <a href="https://twitter.com/Shaderic_/status/1051125026261483520?ref_src=twsrc%5Etfw">October 13, 2018</a></blockquote> <script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script> 
            <script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
        </div>
        <div class="col-lg-6 col-sm-6 portfolio-item">
            <div class="card h-100">
                <a href="#">
                    <img class="card-img-top" src="/assets/Images/poissonDiskSampling/Trees_700x300.webp" /></a>
                <div class="card-body">
                    <div class="card-text">Trees placed using Poisson Disk Sampling.
                    </div>
                </div>

            </div>
        </div>
    </div>

<hr />

<h3 id="poisson-disk-sampling">Poisson Disk sampling</h3>

<p>The reason why Poisson disk sampling produces a natural pattern is the way the points are generated. Instead of generating a random X and Y coordinate, each point is generated between a minimum and maximum distance between each other.</p>

<div class="row">
        <div class="col-lg-6 col-sm-6 portfolio-item">
            <div class="card h-100">
                <a href="#">
                    <img class="card-img-top" src="/assets/Images/poissonDiskSampling/RandomXY_700x400.webp" /></a>
                <div class="card-body">
                    <div class="card-text">Points generated with random X and Y coordinates.</div>
                </div>
            </div>
        </div>
        <div class="col-lg-6 col-sm-6 portfolio-item">
            <div class="card h-100">
                <a href="#">
                    <img class="card-img-top" src="/assets/Images/poissonDiskSampling/PoissonDiscSampling_700x400.webp" /></a>
                <div class="card-body">
                    <div class="card-text">Points generated with Poisson Disk Sampling. All of the points are
                        distributed evenly with at least 2 units apart from each other.
                    </div>
                </div>

            </div>
        </div>
    </div>

<hr />

<h3 id="how-it-works">How it works</h3>

<div class="row">
        <div class="col-lg-6 col-sm-6 portfolio-item">
            <p>
                Before we start generating the points we have to set up all the needed inputs. The algorithm itself only
                takes
                in
                <b>r</b> and <b>k</b> as input. <b>r</b> is the minimum distance between the samples and <b>k</b> is a
                constant
                which is the maximum samples before rejection. First, we initialize a 2D grid for storing the
                samples.<br /> The
                cell
                size of this grid is bounded by <b>r/√n</b> where <b>n</b> is the number of dimensions (2 in this
                case) so that
                each cell will contain at most 1 sample.
            </p>
            <p>
                In step 1 we generate the initial sample that is randomly chosen from the domain. This sample is
                inserted into
                the grid and added to the active list, this active list holds the current samples which we generate new
                samples
                from.
            </p>
            <p>
                After we have our initial sample, while the active list is not empty, we choose a random index from that
                list
                and generate up to <b>k</b> points around it. These points lay between <b>r</b> and <b>2*r</b> distance
                from the
                current index. For each point, we check if it is between <b>r</b> distance from any of the samples saved
                in the
                grid and since the points are generated between <b>r</b> and <b>2*r</b>, we can skip unnecessary checks
                by only
                checking the neighboring cells of the current index. If we found a point that is adequately far from
                existing
                samples, we save it to the grid and the active list. If after <b>k</b> samples, no such points are
                found, we
                remove the current index from the active list.
            </p>
        </div>
        <div class="col-lg-6 col-sm-6 portfolio-item">
            <div style="position:relative; padding-bottom:calc(56.25% + 44px)">
                <iframe src="https://gfycat.com/ifr/DenseMistyBarnswallow" frameborder="0" scrolling="no" width="100%" height="100%" style="position:absolute;top:0;left:0;" allowfullscreen="">
                </iframe>
            </div>
        </div>
        <div>

        </div>

    </div>

<hr />

<h3 id="checking-which-points-are-inside-the-shape">Checking which points are inside the shape</h3>

<p>To know which points are inside the shape, I found a very fast and short algorithm on the Unity3D wiki.<br />
The basic idea is to run a semi-infinite ray horizontally out from the test point and count how many edges it crosses. <br />
At each crossing, a boolean is switched between true and false. At the end of the ray, this boolean is returned.</p>

<script src="https://gist.github.com/Shaderic/3bb596d38f39cff3d621f7864f4f9fc4.js?ts=2"></script>

<hr />

<h3 id="references">References</h3>

<p><a href="https://www.cct.lsu.edu/~fharhad/ganbatte/siggraph2007/CD2/content/sketches/0250.pdf" target="_blank">Poisson Disk Sampling in Arbitrary Dimensions</a>  <br />
<a href="http://wiki.unity3d.com/index.php/PolyContainsPoint" target="_blank">Poly contains point from Wiki.Unity3d</a></p>

    </div>
    <!-- /.container -->

    <!-- Footer -->
<footer class="bg-light page-footer font-small pt-4">
  <!-- Footer Elements -->
  <div class="footer-links">
    <!-- Social buttons -->
    <ul class="list-unstyled list-inline text-center">
      <li class="list-inline-item ">
        <a href="https://github.com/Shaderic" target="_blank">
          <img src="/assets/icons/iconmonstr-github-1.svg" alt="" width="32" height="32" />
        </a>
      </li>
      <li class="list-inline-item">
        <a href="https://twitter.com/Shaderic_" target="_blank">
          <img src="/assets/icons/iconmonstr-twitter-1.svg" alt="" width="32" height="32" />
        </a>
      </li>
      <li class="list-inline-item">
        <a href="https://www.linkedin.com/in/cédric-van-huffelen" target="_blank">
          <img src="/assets/icons/iconmonstr-linkedin-3.svg" alt="" width="32" height="32" />
        </a>
      </li>
    </ul>
    <!-- Social buttons -->
  </div>
  <!-- Footer Elements -->

  <!-- Copyright -->
  <div class="footer-copyright text-center py-3">
    Copyright &copy; Cédric Van Huffelen 2021
  </div>
  <!-- Copyright -->
</footer>
<!-- Footer -->

<script
  src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
  integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
  crossorigin="anonymous"
></script>
<script
  src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/js/bootstrap.min.js"
  integrity="sha384-oesi62hOLfzrys4LxRF63OJCXdXDipiYWBnvTl9Y9/TRlw5xlKIEHpNyvvDShgf/"
  crossorigin="anonymous"
></script>

  </body>
</html>
